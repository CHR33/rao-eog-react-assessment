(this["webpackJsonpeog-react-visualization-base"]=this["webpackJsonpeog-react-visualization-base"]||[]).push([[0],{238:function(e,t,r){e.exports=r(393)},393:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(22),i=r.n(c),o=r(61),u=r(35),s=r(117),l=r(222),m=r(34),p=r.n(m),d=r(52),f=r(75),b=r(69),v=Object(b.a)({name:"weather",initialState:{temperatureinCelsius:0,temperatureinFahrenheit:0,description:"",locationName:""},reducers:{weatherDataRecevied:function(e,t){var r=t.payload,a=r.description,n=r.locationName,c=r.temperatureinCelsius;e.temperatureinCelsius=c,e.temperatureinFahrenheit=9*c/5+32,e.description=a,e.locationName=n},weatherApiErrorReceived:function(e,t){return e}}}),h=v.reducer,O=v.actions,E=p.a.mark(j),g=p.a.mark(y);function j(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.b)(f.b.error,"Error Received: ".concat(e.payload.error));case 2:case"end":return t.stop()}}),E)}function y(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.d)(O.weatherApiErrorReceived.type,j);case 2:case"end":return e.stop()}}),g)}var w=Object(b.a)({name:"metrics",initialState:{metrics:[],selectedMetrics:[]},reducers:{metricDataRecevied:function(e,t){e.metrics=Object(o.a)(t.payload)},metricApiErrorReceived:function(e,t){console.log("error getting metrics")},metricSelectionUpdated:function(e,t){e.selectedMetrics=t.payload}}}),x=w.reducer,A=w.actions,D=p.a.mark(k),M=p.a.mark(R);function k(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.b)(f.b.error,"Error Received: ".concat(e.payload.error));case 2:case"end":return t.stop()}}),D)}function R(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.d)(A.metricApiErrorReceived.type,k);case 2:case"end":return e.stop()}}),M)}var F=p.a.mark(P);function P(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)([Object(d.c)(y),Object(d.c)(R)]);case 2:case"end":return e.stop()}}),F)}var N=Object(b.a)({name:"metricsChartData",initialState:{measurements:[]},reducers:{measurementsDataRecevied:function(e,t){e.measurements=Object(o.a)(t.payload)},measurementsDataApiErrorReceived:function(e,t){console.log("error getting metrics measurement data")},newMeasurementDataReceived:function(e,t){var r=t.payload.newMeasurement,a=e.measurements.slice();a.forEach((function(e){e.metric===r.metric&&(e.measurements.push(r),a.shift())}))}}}),S=N.reducer,I=N.actions,T={weather:h,metrics:x,measurements:S},L=Object(u.combineReducers)(T),q=r(37),C=r(39),W=r(194),B=r(220),Q=r(449),K=r(450),V=(r(258),r(439)),$=r(437),z=r(438),G=r(436),U=r(27),J=r(455),H=r(435),X=r(456),Y=r(9),Z=Object(Y.a)((function(e){return{root:{background:e.palette.secondary.main},label:{color:e.palette.primary.main}}}))(X.a),_=function(e){var t=e.weather;return{temperatureinFahrenheit:t.temperatureinFahrenheit,description:t.description,locationName:t.locationName}},ee=function(){return n.a.createElement(te,null)},te=function(){var e=Object(J.a)(),t={latitude:e.latitude||29.7604,longitude:e.longitude||-95.3698},r=Object(q.b)(),c=Object(q.c)(_),i=c.temperatureinFahrenheit,o=c.description,u=c.locationName,s=Object(C.e)({query:"\nquery($latLong: WeatherQuery!) {\n  getWeatherForLocation(latLong: $latLong) {\n    description\n    locationName\n    temperatureinCelsius\n  }\n}\n",variables:{latLong:t}}),l=Object(U.a)(s,1)[0],m=l.fetching,p=l.data,d=l.error;return Object(a.useEffect)((function(){if(d)r(O.weatherApiErrorReceived({error:d.message}));else if(p){var e=p.getWeatherForLocation;r(O.weatherDataRecevied(e))}}),[r,p,d]),m?n.a.createElement(H.a,null):n.a.createElement(Z,{label:"Weather in ".concat(u,": ").concat(o," and ").concat(i,"\xb0")})},re=Object(G.a)({grow:{flexGrow:1}}),ae=function(){var e=re();return n.a.createElement($.a,{position:"static"},n.a.createElement(z.a,null,n.a.createElement(V.a,{variant:"h6",color:"inherit",className:e.grow},"rao's"," EOG React Visualization Assessment"),n.a.createElement(ee,null)))},ne=Object(G.a)({wrapper:{height:"100vh"}}),ce=function(e){var t=e.children,r=ne();return a.createElement("div",{className:r.wrapper},t)},ie=r(453),oe=r(451),ue=Object(G.a)({container:{width:"40%",padding:"15px"},listItem:{"&:hover":{backgroundColor:"#bbdefb"}}}),se=function(e){return e.metrics},le=function(){return n.a.createElement(me,null)},me=function(){var e=ue(),t=Object(q.b)(),r=Object(q.c)(se),c=r.metrics,i=r.selectedMetrics,o=Object(C.e)({query:"\n  query {\n    getMetrics\n  }\n"}),u=Object(U.a)(o,1)[0],s=u.fetching,l=u.data,m=u.error;Object(a.useEffect)((function(){m?t(A.metricApiErrorReceived({error:m.message})):l&&t(A.metricDataRecevied(l.getMetrics))}),[t,l,m]);var p=i.length>0?"":"select...";return n.a.createElement("div",{className:e.container},n.a.createElement(ie.a,{classes:{option:e.listItem},debug:!0,filterSelectedOptions:!0,loading:s,multiple:!0,options:c,renderInput:function(e){return n.a.createElement(oe.a,Object.assign({},e,{placeholder:p,variant:"outlined"}))},renderOption:function(e){return n.a.createElement(V.a,{variant:"body2"},e)},renderTags:function(e,t){return e.map((function(e,r){return n.a.createElement(Z,Object.assign({variant:"outlined",label:e},t({index:r})))}))},onChange:function(e,r){t(r?A.metricSelectionUpdated(r):A.metricSelectionUpdated([]))},value:i}))},pe=r(441),de=r(442),fe=Object(G.a)({root:{display:"flex",flexWrap:"wrap",flexGrow:1,margin:"20px",width:"60%"},card:{marginRight:"1rem",marginBottom:"1rem"}}),be=function(e){return e.metrics.selectedMetrics},ve=function(e){return e.measurements.measurements},he=function(){var e=fe(),t=Object(q.c)(be),r=Object(q.c)(ve),a=n.a.useMemo((function(){var e=[];return r.forEach((function(r){t.forEach((function(t){if(r.metric===t){var a=r.measurements.slice(-1),n=Object(U.a)(a,1)[0];e.push({name:t,value:n.value})}}))})),e}),[r,t]);return n.a.createElement("section",{className:e.root},a.map((function(t){var r=t.name,a=t.value;return n.a.createElement(pe.a,{className:e.card,key:"metric-".concat(r)},n.a.createElement(de.a,null,n.a.createElement(V.a,{variant:"h6"},r),n.a.createElement(V.a,{variant:"h3"},a)))})))},Oe=r(153),Ee=r.n(Oe),ge=r(443),je=r(444),ye=r(448),we=r(218),xe=r(219),Ae=r(41),De=r(99),Me=r(103),ke=r(223),Re=r(202);function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var Pe=function(e){return e.metrics},Ne=function(e){return Object(o.a)(e.measurements.measurements)},Se=(new Date).valueOf()-54e5,Ie=function(){var e=Object(q.c)(Ne),t=Object(q.c)(Pe).selectedMetrics,r=Object(q.b)(),a=Object(C.f)({query:"\n  subscription {\n    newMeasurement{\n      metric\n      at\n      value\n      unit\n    }\n  }\n",variables:{}}),c=Object(U.a)(a,1)[0],i=n.a.useMemo((function(){return t.map((function(e){return{metricName:e,after:Se}}))}),[t]),o=n.a.useMemo((function(){var t=[];return e.forEach((function(e){return t.push(e.measurements)})),t.flat().map((function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(r,!0).forEach((function(t){Object(Re.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);return t[t.metric]=t.value,t}))}),[e]),u=Object(C.e)({query:"\n\tquery($measurementQuery: [MeasurementQuery]) {\n\t\tgetMultipleMeasurements(input: $measurementQuery) {\n\t\t\tmetric,\n\t\t\tmeasurements {\n\t\t\t\tat,\n\t\t\t\tmetric,\n\t\t\t\tvalue,\n\t\t\t\tunit\n\t\t\t}\n\t\t}\n\t}\n",variables:{measurementQuery:i},pause:0===i.length}),s=Object(U.a)(u,2),l=s[0],m=s[1],p=l.data;return n.a.useEffect((function(){if(p){var e=p.getMultipleMeasurements;r(I.measurementsDataRecevied(e))}}),[p,r,m]),n.a.useEffect((function(){c.data&&r(I.newMeasurementDataReceived(c.data))}),[r,c]),{chartData:o,selectedMetrics:t}},Te=function(){return n.a.createElement(Le,null)},Le=function(){var e=Ie(),t=e.chartData,r=e.selectedMetrics,a=r.some((function(e){return["waterTemp","oilTemp","flareTemp"].includes(e)})),c=r.some((function(e){return["tubingPressure","casingPressure"].includes(e)})),i=r.some((function(e){return["injValveOpen"].includes(e)}));return 0===t.length?null:n.a.createElement(ge.a,{width:"100%",height:500},n.a.createElement(je.a,{data:t,margin:{top:5,right:30,left:20,bottom:5}},n.a.createElement(ye.a,{strokeDasharray:"3 3"}),n.a.createElement(we.a,{dataKey:"at",domain:["auto","auto"],type:"number",tickFormatter:function(e){return Ee.a.unix(e).format("LT")}}),a&&n.a.createElement(xe.a,{orientation:"left",yAxisId:"F"},n.a.createElement(Ae.a,{offset:20,position:"bottom",style:{textAnchor:"middle"},value:"F"})),c&&n.a.createElement(xe.a,{yAxisId:"PSI"},n.a.createElement(Ae.a,{offset:20,position:"bottom",style:{textAnchor:"middle"},value:"PSI"})),i&&n.a.createElement(xe.a,{orientation:"left",yAxisId:"%"},n.a.createElement(Ae.a,{offset:20,position:"bottom",style:{textAnchor:"middle"},value:"%"})),n.a.createElement(De.a,null),n.a.createElement(Me.a,{labelFormatter:function(e){return Ee()(e).format("LLLL")}}),r.length>0?r.map((function(e){var t=qe[e];switch(e){case"waterTemp":case"flareTemp":case"oilTemp":return n.a.createElement(ke.a,{activeDot:{r:5},dataKey:e,dot:!1,isAnimationActive:!1,name:e,key:"line-".concat(e),stroke:t,type:"monotone",yAxisId:"F"});case"tubingPressure":case"casingPressure":return n.a.createElement(ke.a,{activeDot:{r:5},dataKey:e,dot:!1,isAnimationActive:!1,key:"line-".concat(e),name:e,stroke:t,type:"monotone",yAxisId:"PSI"});case"injValveOpen":return n.a.createElement(ke.a,{activeDot:{r:5},dataKey:e,dot:!1,isAnimationActive:!1,key:"line-".concat(e),name:e,stroke:t,type:"monotone",yAxisId:"%"});default:return null}})):null))},qe={oilTemp:"#311B92",waterTemp:"#F57F17",flareTemp:"#FFAB00",tubingPressure:"#BF360C",casingPressure:"#880E4F",injValveOpen:"#006064"},Ce=Object(G.a)({container:{display:"flex",flexDirection:"column"},metrics:{display:"flex"}}),We=function(){return n.a.createElement(Be,null)},Be=function(){var e=Ce();return n.a.createElement("article",{className:e.container},n.a.createElement("div",{className:e.metrics},n.a.createElement(he,null),n.a.createElement(le,null)),n.a.createElement(Te,null))},Qe=new W.SubscriptionClient("ws://react.eogresources.com/graphql",{reconnect:!0}),Ke=Object(C.b)({url:"https://react.eogresources.com/graphql",exchanges:[].concat(Object(o.a)(C.c),[Object(C.d)({forwardSubscription:function(e){return Qe.request(e)}})])}),Ve=function(){var e=Object(s.composeWithDevTools)({}),t=Object(l.a)(),r=Object(u.applyMiddleware)(t),a=Object(u.createStore)(L,e(r));return t.run(P),a}(),$e=Object(B.a)({palette:{primary:{main:"rgb(39,49,66)"},secondary:{main:"rgb(197,208,222)"},background:{default:"rgb(226,231,238)"}}}),ze=function(){return n.a.createElement(Q.a,{theme:$e},n.a.createElement(K.a,null),n.a.createElement(q.a,{store:Ve},n.a.createElement(ce,null,n.a.createElement(ae,null),n.a.createElement(We,null),n.a.createElement(f.a,null))))};i.a.render(n.a.createElement((function(){return n.a.createElement(C.a,{value:Ke},n.a.createElement(ze,null))}),null),document.getElementById("root"))}},[[238,1,2]]]);
//# sourceMappingURL=main.dc3000ea.chunk.js.map