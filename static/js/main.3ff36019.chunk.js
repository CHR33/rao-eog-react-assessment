(this["webpackJsonpeog-react-visualization-base"]=this["webpackJsonpeog-react-visualization-base"]||[]).push([[0],{239:function(e,t,r){e.exports=r(394)},394:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(22),i=r.n(c),o=r(128),u=r(37),s=r(74),l=r(39),m=r(195),p=r(220),d=r(450),f=r(451),b=r(35),v=r(120),O=r(222),y=r(34),j=r.n(y),g=r(52),h=r(68),E=Object(h.a)({name:"weather",initialState:{temperatureinCelsius:0,temperatureinFahrenheit:0,description:"",locationName:""},reducers:{weatherDataRecevied:function(e,t){var r=t.payload,a=r.description,n=r.locationName,c=r.temperatureinCelsius;e.temperatureinCelsius=c,e.temperatureinFahrenheit=9*c/5+32,e.description=a,e.locationName=n},weatherApiErrorReceived:function(e,t){return e}}}),w=E.reducer,D=E.actions,M=j.a.mark(P),x=j.a.mark(A);function P(e){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.b)(s.b.error,"Error Received: ".concat(e.payload.error));case 2:case"end":return t.stop()}}),M)}function A(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.d)(D.weatherApiErrorReceived.type,P);case 2:case"end":return e.stop()}}),x)}var S=r(26),k=Object(h.a)({name:"metrics",initialState:{metrics:[],recentlyDeletedMetric:"",recentlySelectedMetric:"",selectedMetrics:[]},reducers:{metricDataRecevied:function(e,t){e.metrics=Object(o.a)(t.payload)},metricApiErrorReceived:function(e,t){console.log("error getting metrics")},metricSelectionUpdated:function(e,t){var r=t.payload.filter((function(t){return!e.selectedMetrics.includes(t)})),a=Object(S.a)(r,1)[0],n=e.selectedMetrics.filter((function(e){return!t.payload.includes(e)})),c=Object(S.a)(n,1)[0];e.selectedMetrics=t.payload,c&&(e.recentlyDeletedMetric=c),a&&(e.recentlySelectedMetric=a)}}}),R=k.reducer,F=k.actions,N=j.a.mark(T),I=j.a.mark(L);function T(e){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.b)(s.b.error,"Error Received: ".concat(e.payload.error));case 2:case"end":return t.stop()}}),N)}function L(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.d)(F.metricApiErrorReceived.type,T);case 2:case"end":return e.stop()}}),I)}var q=j.a.mark(C);function C(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.a)([Object(g.c)(A),Object(g.c)(L)]);case 2:case"end":return e.stop()}}),q)}var W=r(81);function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var Q=Object(h.a)({name:"metricsChartData",initialState:{measurementDataMap:{}},reducers:{measurementsDataRecevied:function(e,t){var r=t.payload,a=r.metric,n=r.measurements;e.measurementDataMap[a]=n},measurementsDataDeleted:function(e,t){var r=t.payload;e.measurementDataMap[r]=[]},measurementsDataApiErrorReceived:function(e,t){console.log("error getting metrics measurement data")},latestMeasurementDataReceived:function(e,t){var r=t.payload.newMeasurement,a=r.metric,n=r.value;e.measurementDataMap[a]&&e.measurementDataMap[a].push(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(r,!0).forEach((function(t){Object(W.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r,Object(W.a)({},a,n)))}}}),K=Q.reducer,V=Q.actions,$={weather:w,metrics:R,measurements:K},z=Object(b.combineReducers)($),G=(r(259),r(440)),U=r(438),J=r(439),H=r(437),X=r(456),Y=r(436),Z=r(457),_=r(9),ee=Object(_.a)((function(e){return{root:{background:e.palette.secondary.main},label:{color:e.palette.primary.main}}}))(Z.a),te=function(e){var t=e.weather;return{temperatureinFahrenheit:t.temperatureinFahrenheit,description:t.description,locationName:t.locationName}},re=function(){return n.a.createElement(ae,null)},ae=function(){var e=Object(X.a)(),t={latitude:e.latitude||29.7604,longitude:e.longitude||-95.3698},r=Object(u.b)(),c=Object(u.c)(te),i=c.temperatureinFahrenheit,o=c.description,s=c.locationName,m=Object(l.e)({query:"\nquery($latLong: WeatherQuery!) {\n  getWeatherForLocation(latLong: $latLong) {\n    description\n    locationName\n    temperatureinCelsius\n  }\n}\n",variables:{latLong:t}}),p=Object(S.a)(m,1)[0],d=p.fetching,f=p.data,b=p.error;return Object(a.useEffect)((function(){if(b)r(D.weatherApiErrorReceived({error:b.message}));else if(f){var e=f.getWeatherForLocation;r(D.weatherDataRecevied(e))}}),[r,f,b]),d?n.a.createElement(Y.a,null):n.a.createElement(ee,{label:"Weather in ".concat(s,": ").concat(o," and ").concat(i,"\xb0")})},ne=Object(H.a)({grow:{flexGrow:1}}),ce=function(){var e=ne();return n.a.createElement(U.a,{position:"static"},n.a.createElement(J.a,null,n.a.createElement(G.a,{variant:"h6",color:"inherit",className:e.grow},"rao's"," EOG React Visualization Assessment"),n.a.createElement(re,null)))},ie=Object(H.a)({wrapper:{height:"100vh"}}),oe=function(e){var t=e.children,r=ie();return a.createElement("div",{className:r.wrapper},t)},ue=r(454),se=r(452),le=Object(H.a)({container:{width:"40%",padding:"15px"},listItem:{"&:hover":{backgroundColor:"#bbdefb"}}}),me=function(e){return e.metrics},pe=function(){return n.a.createElement(de,null)},de=function(){var e=le(),t=Object(u.b)(),r=Object(u.c)(me),c=r.metrics,i=r.selectedMetrics,o=Object(l.e)({query:"\n  query {\n    getMetrics\n  }\n"}),s=Object(S.a)(o,1)[0],m=s.fetching,p=s.data,d=s.error;Object(a.useEffect)((function(){d?t(F.metricApiErrorReceived({error:d.message})):p&&t(F.metricDataRecevied(p.getMetrics))}),[t,p,d]);var f=i.length>0?"":"select...";return n.a.createElement("div",{className:e.container},n.a.createElement(ue.a,{classes:{option:e.listItem},debug:!0,filterSelectedOptions:!0,loading:m,multiple:!0,options:c,renderInput:function(e){return n.a.createElement(se.a,Object.assign({},e,{placeholder:f,variant:"outlined"}))},renderOption:function(e){return n.a.createElement(G.a,{variant:"body2"},e)},renderTags:function(e,t){return e.map((function(e,r){return n.a.createElement(ee,Object.assign({variant:"outlined",label:e},t({index:r})))}))},onChange:function(e,r){t(r?F.metricSelectionUpdated(r):F.metricSelectionUpdated([]))},value:i}))},fe=r(224),be=r(442),ve=r(443);function Oe(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var je=Object(H.a)({root:{display:"flex",flexWrap:"wrap",flexGrow:1,margin:"20px",width:"60%"},card:{marginRight:"1rem",marginBottom:"1rem"}}),ge=function(e){return e.metrics.selectedMetrics},he=function(){var e=je(),t=Object(u.c)(ge),r=Object(u.b)(),a=n.a.useState({}),c=Object(S.a)(a,2),i=c[0],o=c[1],s=Object(l.f)({query:"\n  subscription {\n    newMeasurement{\n      metric\n      at\n      value\n      unit\n    }\n  }\n",variables:{}}),m=Object(S.a)(s,1)[0];return n.a.useEffect((function(){var e=m.data;if(e){var a=e.newMeasurement,n=a.metric,c=a.value;t.includes(n)?o((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(r,!0).forEach((function(t){Object(W.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,Object(W.a)({},n,c))})):o((function(e){e[n];return Object(fe.a)(e,[n].map(Oe))})),r(V.latestMeasurementDataReceived(e))}}),[r,m,t]),n.a.createElement("section",{className:e.root},Object.keys(i).map((function(t){return n.a.createElement(be.a,{className:e.card,key:"metric-".concat(t)},n.a.createElement(ve.a,null,n.a.createElement(G.a,{variant:"h6"},t),n.a.createElement(G.a,{variant:"h3"},i[t])))})))},Ee=r(154),we=r.n(Ee),De=r(444),Me=r(445),xe=r(449),Pe=r(218),Ae=r(219),Se=r(41),ke=r(99),Re=r(103),Fe=r(223),Ne=function(e){return e.metrics},Ie=function(e){return e.measurements.measurementDataMap},Te=(new Date).valueOf()-54e5,Le=function(){return n.a.createElement(qe,null)},qe=function(){var e=function(){var e,t=Object(u.c)(Ie),r=Object(u.c)(Ne),a=r.selectedMetrics,c=r.recentlySelectedMetric,i=r.recentlyDeletedMetric,o=Object(u.b)(),s=n.a.useMemo((function(){return Object.keys(t).reduce((function(e,r){return e.concat(t[r])}),[])}),[t]),m=n.a.useMemo((function(){if(c)return[{metricName:c,after:Te}]}),[c]),p=Object(l.e)({query:(e=c,"\n\tquery($measurementQuery: [MeasurementQuery]) {\n\t\tgetMultipleMeasurements(input: $measurementQuery) {\n\t\t\tmetric,\n\t\t\tmeasurements {\n\t\t\t\tat,\n\t\t\t\tmetric,\n\t\t\t\t".concat(e,": value,\n\t\t\t\tunit\n\t\t\t}\n\t\t}\n\t}\n")),variables:{measurementQuery:m},pause:!m}),d=Object(S.a)(p,2),f=d[0],b=d[1],v=f.data;return n.a.useEffect((function(){if(v){var e=v.getMultipleMeasurements;o(V.measurementsDataRecevied(e[0]))}}),[v,o,b]),n.a.useEffect((function(){i&&o(V.measurementsDataRecevied({metric:i,measurements:[]}))}),[o,i]),{chartData:s,selectedMetrics:a}}(),t=e.chartData,r=e.selectedMetrics,a=r.some((function(e){return["waterTemp","oilTemp","flareTemp"].includes(e)})),c=r.some((function(e){return["tubingPressure","casingPressure"].includes(e)})),i=r.some((function(e){return["injValveOpen"].includes(e)}));return 0===r.length?null:n.a.createElement(De.a,{width:"100%",height:500},n.a.createElement(Me.a,{data:t,margin:{top:5,right:30,left:20,bottom:5}},n.a.createElement(xe.a,{strokeDasharray:"3 3"}),n.a.createElement(Pe.a,{dataKey:"at",domain:["auto","auto"],type:"number",tickFormatter:function(e){return we.a.unix(e).format("LT")}}),a&&n.a.createElement(Ae.a,{orientation:"left",yAxisId:"F"},n.a.createElement(Se.a,{offset:20,position:"bottom",style:{textAnchor:"middle"},value:"F"})),c&&n.a.createElement(Ae.a,{yAxisId:"PSI"},n.a.createElement(Se.a,{offset:20,position:"bottom",style:{textAnchor:"middle"},value:"PSI"})),i&&n.a.createElement(Ae.a,{orientation:"left",yAxisId:"%"},n.a.createElement(Se.a,{offset:20,position:"bottom",style:{textAnchor:"middle"},value:"%"})),n.a.createElement(ke.a,null),n.a.createElement(Re.a,{labelFormatter:function(e){return we()(e).format("LLLL")}}),r.length>0?r.map((function(e){var t=Ce[e];switch(e){case"waterTemp":case"flareTemp":case"oilTemp":return n.a.createElement(Fe.a,{activeDot:{r:5},dataKey:e,dot:!1,isAnimationActive:!1,name:e,key:"line-".concat(e),stroke:t,type:"monotone",yAxisId:"F"});case"tubingPressure":case"casingPressure":return n.a.createElement(Fe.a,{activeDot:{r:5},dataKey:e,dot:!1,isAnimationActive:!1,key:"line-".concat(e),name:e,stroke:t,type:"monotone",yAxisId:"PSI"});case"injValveOpen":return n.a.createElement(Fe.a,{activeDot:{r:5},dataKey:e,dot:!1,isAnimationActive:!1,key:"line-".concat(e),name:e,stroke:t,type:"monotone",yAxisId:"%"});default:return null}})):null))},Ce={oilTemp:"#311B92",waterTemp:"#F57F17",flareTemp:"#FFAB00",tubingPressure:"#BF360C",casingPressure:"#880E4F",injValveOpen:"#006064"},We=Object(H.a)({container:{display:"flex",flexDirection:"column"},metrics:{display:"flex"}}),Be=function(){return n.a.createElement(Qe,null)},Qe=function(){var e=We();return n.a.createElement("article",{className:e.container},n.a.createElement("div",{className:e.metrics},n.a.createElement(he,null),n.a.createElement(pe,null)),n.a.createElement(Le,null))},Ke=new m.SubscriptionClient("wss://react.eogresources.com/graphql",{reconnect:!0}),Ve=Object(l.b)({url:"https://react.eogresources.com/graphql",exchanges:[].concat(Object(o.a)(l.c),[Object(l.d)({forwardSubscription:function(e){return Ke.request(e)}})])}),$e=function(){var e=Object(v.composeWithDevTools)({}),t=Object(O.a)(),r=Object(b.applyMiddleware)(t),a=Object(b.createStore)(z,e(r));return t.run(C),a}(),ze=Object(p.a)({palette:{primary:{main:"rgb(39,49,66)"},secondary:{main:"rgb(197,208,222)"},background:{default:"rgb(226,231,238)"}}}),Ge=function(){return n.a.createElement(d.a,{theme:ze},n.a.createElement(f.a,null),n.a.createElement(u.a,{store:$e},n.a.createElement(oe,null,n.a.createElement(ce,null),n.a.createElement(Be,null),n.a.createElement(s.a,null))))};i.a.render(n.a.createElement((function(){return n.a.createElement(l.a,{value:Ve},n.a.createElement(Ge,null))}),null),document.getElementById("root"))}},[[239,1,2]]]);
//# sourceMappingURL=main.3ff36019.chunk.js.map